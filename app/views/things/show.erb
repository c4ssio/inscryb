<xml id="data_island_wrapper" style="display:none">
  <%= render :partial=>'xml' %>
</xml>
<!--user layer-->
<div class="user_wrapper" id="user_wrapper">
  <%=render :file=>'users/login'%>
</div>
<!-- path layer -->
<div class="thing_header">
  <div class="target_group" id="thing_header_wrapper">
    <%=render :partial=>'thing_header'%>
  </div>
</div>
<!--search layer-->
<%form_tag('javascript:void(0)') do%>
  <div class="search">
    <p><span>Search</span>
      <%= image_tag 'spinner.gif', :id=>'spinner', :style=>"display:none; float:right;"%>
      <%=text_field(:thing,:search, :size=>10)-%>
      <%=button_to_function('Clr',clear_field_and_focus('thing_search'),
        :id=>'clear_search_button',:style=>('display:none' unless session[:search]))%>
    </p>
  </div>
<%end-%>
<div class="add_tag" id="add_tag_wrapper">
  <%=render :partial=>'add_tag' unless (session[:search] || session[:user].id==1)-%>
</div>
<div class="clip_members" id="clip_member_wrapper">
  <%=render :partial=>'clip_members' unless (session[:search] || session[:user].id==1)-%>
</div>
<div id="child_and_tag_wrapper">
  <%=render :file=>'things/refresh'%>
</div>
<%= observe_field :thing_search,
  :frequency => 0.4,
  #:before=> "Element.show('spinner')",
#:complete => "Element.hide('spinner')",
:url => {:action=>'refresh'},
  :with => "'thing[search]=' + encodeURIComponent(value)"%>
<%if (session[:search] || session[:user]==1)%>
  <%=set_focus_to_id('thing_search')%>
<%else%>
  <%=set_focus_to_id('thing_key')%>
<%end%>
